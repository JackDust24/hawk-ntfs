(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(68785)}])},68785:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var s=n(85893),a=n(67294),i=n(83078),r=n(4672),p=n(67225),o=n(25675),u=n.n(o),d=n(26462),l=n(84142);function c(e){let{nftAddress:t,tokenId:n,isVisible:p,marketplaceAddress:o,onClose:u}=e,c=(0,d.lm)(),[y,m]=(0,a.useState)("0"),f=async e=>{await e.wait(1),c({type:"success",message:"listing updated",title:"Listing updated - please refresh (and move blocks)",position:"topR"}),u&&u(),m("0")},{runContractFunction:b}=(0,i.JX)({abi:r,contractAddress:o,functionName:"updateListing",params:{nftAddress:t,tokenId:n,newPrice:l.fi(y||"0")}});return(0,s.jsx)(d.u_,{isVisible:p,onCancel:u,onCloseButtonPressed:u,onOk:()=>{b({onError:e=>{console.log(e)},onSuccess:()=>f})},children:(0,s.jsx)(d.II,{label:"Update listing price in L1 Currency (ETH)",name:"New listing price",type:"number",onChange:e=>{m(e.target.value)}})})}let y=(e,t)=>{if(e.length<=t)return e;let n=t-3;return e.substring(0,Math.ceil(n/2))+"..."+e.substring(e.length-Math.floor(n/2))};function m(e){let{price:t,nftAddress:n,tokenId:o,marketplaceAddress:m,seller:f}=e,{isWeb3Enabled:b,account:x}=(0,i.Nr)(),[v,I]=(0,a.useState)(""),[k,h]=(0,a.useState)(""),[w,g]=(0,a.useState)(""),[N,A]=(0,a.useState)(!1),M=(0,d.lm)(),{runContractFunction:j}=(0,i.JX)({abi:p,contractAddress:n,functionName:"tokenURI",params:{tokenId:o}}),{runContractFunction:_}=(0,i.JX)({abi:r,contractAddress:m,functionName:"buyItem",msgValue:t,params:{nftAddress:n,tokenId:o}});async function C(){let e=await j();if(console.log("The TokenURI is ".concat(e)),e){let t=e.replace("ipfs://","https://ipfs.io/ipfs/"),n=await (await fetch(t)).json();I(n.image.replace("ipfs://","https://ipfs.io/ipfs/")),h(n.name),g(n.description)}}let E=()=>{M({type:"success",message:"Item bought!",title:"Item Bought",position:"topR"})};(0,a.useEffect)(()=>{b&&C()},[b]);let F=f===x||void 0===f,L=F?"you":y(f||"",15);return(0,s.jsx)("div",{children:(0,s.jsx)("div",{children:v?(0,s.jsxs)("div",{children:[(0,s.jsx)(c,{isVisible:N,tokenId:o,marketplaceAddress:m,nftAddress:n,onClose:()=>A(!1)}),(0,s.jsx)(d.Zb,{title:k,description:w,onClick:()=>{F?A(!0):_({onError:e=>console.log(e),onSuccess:()=>E()})},children:(0,s.jsx)("div",{className:"p-2",children:(0,s.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,s.jsxs)("div",{children:["#",o]}),(0,s.jsxs)("div",{className:"italic text-sm",children:["Owned by ",L]}),(0,s.jsx)(u(),{loader:()=>v,src:v,height:"200",width:"200",alt:"nft image"}),(0,s.jsxs)("div",{className:"font-bold",children:[l.bM(t,"ether")," ETH"]})]})})})]}):(0,s.jsx)("div",{children:"Loading..."})})})}var f=n(48036),b=n(82729);function x(){let e=(0,b._)(['\n    {\n        activeItems(first: 5, where: { buyer: "0x0000000000000000000000000000000000000000" }) {\n            id\n            buyer\n            seller\n            nftAddress\n            tokenId\n            price\n        }\n    }\n']);return x=function(){return e},e}let v=(0,n(68806).Ps)(x());var I=n(55850);function k(){let{chainId:e,isWeb3Enabled:t}=(0,i.Nr)(),{loading:n,error:a,data:r}=(0,I.a)(v),p=e?parseInt(e).toString():"31137",o=e?f[p].NftMarketplace[0]:null;return(0,s.jsxs)("div",{className:"container mx-auto",children:[(0,s.jsx)("h1",{className:"py-4 px-4 font-bold text-2xl",children:"Recently Listed"}),(0,s.jsx)("div",{className:"flex flex-wrap",children:t&&e?n||!r?(0,s.jsx)("div",{children:"Loading..."}):r.activeItems.map(e=>{let{price:t,nftAddress:n,tokenId:a,seller:i}=e;return o?(0,s.jsx)(m,{price:t,nftAddress:n,tokenId:a,marketplaceAddress:o,seller:i},"".concat(n).concat(a)):(0,s.jsx)("div",{children:"Network error, please switch to a supported network. "})}):(0,s.jsx)("div",{children:"Web3 Currently Not Enabled"})})]})}},67225:function(e){"use strict";e.exports=JSON.parse('[{"type":"constructor","payable":false,"inputs":[]},{"type":"event","anonymous":false,"name":"Approval","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"approved","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ApprovalForAll","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"operator","indexed":true},{"type":"bool","name":"approved","indexed":false}]},{"type":"event","anonymous":false,"name":"DogMinted","inputs":[{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"Transfer","inputs":[{"type":"address","name":"from","indexed":true},{"type":"address","name":"to","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"function","name":"TOKEN_URI","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"approve","constant":false,"payable":false,"inputs":[{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"balanceOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getApproved","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"getTokenAccount","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"isApprovedForAll","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"},{"type":"address","name":"operator"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"mintNft","constant":false,"payable":false,"inputs":[],"outputs":[]},{"type":"function","name":"name","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"ownerOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"},{"type":"bytes","name":"data"}],"outputs":[]},{"type":"function","name":"setApprovalForAll","constant":false,"payable":false,"inputs":[{"type":"address","name":"operator"},{"type":"bool","name":"approved"}],"outputs":[]},{"type":"function","name":"supportsInterface","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"bytes4","name":"interfaceId"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"symbol","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"tokenURI","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"string"}]},{"type":"function","name":"transferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]}]')},4672:function(e){"use strict";e.exports=JSON.parse('[{"type":"error","name":"NftIsAlreadyListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftIsNotListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftNotApprovedForMarketplace","inputs":[]},{"type":"error","name":"NoProceedsForSeller","inputs":[]},{"type":"error","name":"NotOwnerOfNft","inputs":[]},{"type":"error","name":"PriceMustBeAboveZero","inputs":[]},{"type":"error","name":"PriceNotMet","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}]},{"type":"event","anonymous":false,"name":"ItemBought","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"event","anonymous":false,"name":"ItemCancelled","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ItemListed","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"function","name":"buyItem","constant":false,"stateMutability":"payable","payable":true,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"cancelListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"getListing","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"tuple","components":[{"type":"uint256","name":"price"},{"type":"address","name":"seller"}]}]},{"type":"function","name":"getProceeds","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"seller"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"nftItem","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}],"outputs":[]},{"type":"function","name":"updateListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"newPrice"}],"outputs":[]},{"type":"function","name":"withdrawProceeds","constant":false,"payable":false,"inputs":[],"outputs":[]}]')},48036:function(e){"use strict";e.exports=JSON.parse('{"31337":{"NftMarketplace":["0x5FbDB2315678afecb367f032d93F642f64180aa3"]},"11155111":{"NftMarketplace":["0x97a222941d2001E25Ed9038cD31fCcb54fD99A5c"]}}')}},function(e){e.O(0,[828,774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);